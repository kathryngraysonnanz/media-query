(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[382],{3375:(e,a,r)=>{Promise.resolve().then(r.bind(r,4960))},4960:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>p});var t=r(5155),n=r(2115),s=r(6565),i=r(8719),l=r(5902),o=r(7984),c=r.n(o),d=r(6028),h=r(9780),u=r(9756),x=r(8391),m=r(2912),j=r(465),g=r(8095),y=r(4481);let p=()=>{let[e,a]=(0,n.useState)(""),[r,o]=(0,n.useState)([]),[p,b]=(0,n.useState)(),[_,f]=(0,n.useState)(!1),[C,w]=(0,n.useState)(!1),[v,N]=(0,n.useState)(""),[S,k]=(0,n.useState)(new Date),[D,E]=(0,n.useState)(),[L,A]=(0,n.useState)(!1);function I(){f(!1),b(null),w(!1),N(null),k(null),E(null)}(0,n.useEffect)(()=>{let a=async()=>{o(await (0,i.Ho)(e))};e.trim().length>1?a():o([])},[e]);let M=async()=>{await (0,i.KN)(p.id,v,S),w(!1),I(),a(""),o([]),A(!0),setTimeout(()=>A(!1),3e3)},F=async()=>{await (0,i.Fn)(p.id),w(!1),I(),a(""),o([]),A(!0),setTimeout(()=>A(!1),3e3)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.A,{}),(0,t.jsxs)("main",{children:[(0,t.jsx)("h2",{children:"Search By Title / Author / Tag"}),(0,t.jsx)(s.p,{placeholder:"Search by title...",value:e,onChange:e=>a(e.value),className:c().search}),0===r.length&&e.trim().length>1?(0,t.jsx)("p",{children:"No results found."}):(0,t.jsx)("ul",{className:c().results,children:r.map(e=>(0,t.jsxs)("li",{onClick:a=>(function(e){f(!0),b(e),e.loaned.date&&function(e){let a=new Date,r=new Date(e),t=new Date(r.getFullYear(),r.getMonth(),r.getDate());E(Math.floor((new Date(a.getFullYear(),a.getMonth(),a.getDate())-t)/864e5))}(e.loaned.date)})(e),children:[(0,t.jsx)("strong",{children:e.title})," by ",e.author]},e.id))}),_&&p&&(0,t.jsxs)(d.l,{title:p.title,onClose:e=>I(),children:[(0,t.jsx)("img",{src:p.cover,className:c().cover}),(0,t.jsxs)("p",{children:[(0,t.jsx)("b",{children:"ISBN:"})," ",p.isbn]}),(0,t.jsxs)("p",{style:{textTransform:"capitalize"},children:[(0,t.jsx)("b",{children:"Title:"})," ",(0,t.jsx)("i",{children:p.title})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("b",{children:"Author(s):"})," ",p.author]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("b",{children:"Publish Date:"})," ",p.published]}),(0,t.jsx)("p",{children:(0,t.jsx)("b",{children:"Tags:"})}),(0,t.jsx)("div",{className:c().tagContainer,children:p.tags&&p.tags.map(e=>(0,t.jsx)(x.Z,{className:c().tag,children:e}))}),p.loaned&&(0,t.jsx)(x.Z,{type:"warning",children:(0,t.jsxs)("p",{children:["Loaned to ",p.loaned.name," ",D," days ago."]})}),console.log(p),(0,t.jsxs)(h.f,{children:[!p.loaned&&(0,t.jsx)(u.$,{onClick:e=>w(!0),children:"Loan Media"}),p.loaned&&(0,t.jsx)(u.$,{onClick:e=>F(),children:"Return Loan"}),(0,t.jsx)(u.$,{onClick:e=>I(),children:"Close"})]})]}),C&&(0,t.jsxs)(d.l,{title:"Loan Book",onClose:e=>I(),children:[(0,t.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,t.jsx)("label",{children:"Borrower's Name"}),(0,t.jsx)(s.p,{value:v,onChange:e=>N(e.target.value),placeholder:"e.g. Alex"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Loan Date"}),(0,t.jsx)(g.lr,{value:S,onChange:e=>k(e.value)})]}),(0,t.jsxs)(h.f,{children:[(0,t.jsx)(u.$,{themeColor:"primary",onClick:e=>M(),children:"Save"}),(0,t.jsx)(u.$,{onClick:e=>I(),children:"Cancel"})]})]}),(0,t.jsx)(y.z,{enter:!0,exit:!0,children:L&&(0,t.jsx)(m.N,{className:c().position,children:(0,t.jsx)(j.E,{className:c().notification,type:{style:"success",icon:!0},closable:!0,onClose:()=>A(!1),children:(0,t.jsx)("p",{children:"Your loan data has been updated."})})})})]})]})}},5902:(e,a,r)=>{"use strict";r.d(a,{A:()=>o});var t=r(5155),n=r(9946),s=r(2241),i=r(8120),l=r.n(i);function o(){return(0,t.jsxs)(n.h,{className:l().header,children:[(0,t.jsx)(s.o,{children:(0,t.jsx)("h1",{children:"Media Library"})}),(0,t.jsxs)(s.o,{children:[(0,t.jsx)("a",{href:"https://kathryngraysonnanz.github.io/media-query/",children:"Add"}),(0,t.jsx)("a",{href:"https://kathryngraysonnanz.github.io/media-query/library",children:"Search"}),(0,t.jsx)("a",{href:"https://kathryngraysonnanz.github.io/media-query//browse",children:"Browse"})]})]})}},7984:e=>{e.exports={search:"library_search__JpV09",results:"library_results__8pyEX",cover:"library_cover__0I5EX",position:"library_position__DNc9j",notification:"library_notification__yHI9H",tagContainer:"library_tagContainer__EWpum",tag:"library_tag__VCFtS"}},8120:e=>{e.exports={header:"header_header__zSvjR"}},8719:(e,a,r)=>{"use strict";r.d(a,{NA:()=>l,xM:()=>o,Fn:()=>h,UC:()=>i,Ho:()=>c,KN:()=>d});var t=r(5317);let n=(0,r(3915).Wp)({apiKey:"AIzaSyCUm4lKOrEMD2NCf_OTNluVxfl_X_4XPF8",authDomain:"media-query-gn.firebaseapp.com",projectId:"media-query-gn",storageBucket:"media-query-gn.firebasestorage.app",messagingSenderId:"329944024899",appId:"1:329944024899:web:b8a9dc072c216b858191f6",measurementId:"G-M964RJ1DLQ"}),s=(0,t.aU)(n),i=async e=>{try{let a=await (0,t.gS)((0,t.rJ)(s,"media"),{...e});return console.log("Media saved with ID:",a.id),a.id}catch(e){console.error("Error saving media to Firestore:",e)}},l=async e=>{let a=(0,t.rJ)(s,"media"),r=(0,t.P)(a,(0,t._M)("isbn","==",e));return!(await (0,t.GG)(r)).empty},o=async()=>{try{return(await (0,t.GG)((0,t.rJ)(s,"media"))).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error fetching media:",e),[]}},c=async e=>{if(!e.trim())return[];let a=(0,t.rJ)(s,"media"),r=(0,t.P)(a),n=await (0,t.GG)(r),i=e.toLowerCase();return n.docs.map(e=>({id:e.id,...e.data()})).filter(e=>{var a,r;let t=null==(a=e.title)?void 0:a.toLowerCase().includes(i),n=null==(r=e.author)?void 0:r.toLowerCase().includes(i),s=!!Array.isArray(e.tags)&&e.tags.some(e=>e.toLowerCase().includes(i));return t||n||s})},d=async(e,a,r)=>{try{let n=(0,t.H9)(s,"media",e);await (0,t.mZ)(n,{loaned:{name:a,date:r.toISOString()}})}catch(e){console.error("Error updating loan info:",e)}},h=async e=>{try{let a=(0,t.H9)(s,"media",e);await (0,t.mZ)(a,{loaned:!1})}catch(e){console.error("Error updating loan info:",e)}}}},e=>{var a=a=>e(e.s=a);e.O(0,[995,992,191,415,95,846,441,684,358],()=>a(3375)),_N_E=e.O()}]);