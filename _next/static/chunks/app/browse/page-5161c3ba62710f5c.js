(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{4274:(e,r,a)=>{Promise.resolve().then(a.bind(a,8961))},5902:(e,r,a)=>{"use strict";a.d(r,{A:()=>o});var t=a(5155),i=a(9946),s=a(2241),n=a(8120),d=a.n(n);function o(){return(0,t.jsxs)(i.h,{className:d().header,children:[(0,t.jsx)(s.o,{children:(0,t.jsx)("h1",{children:"Media Library"})}),(0,t.jsxs)(s.o,{children:[(0,t.jsx)("a",{href:"/",children:"Add"}),(0,t.jsx)("a",{href:"/library",children:"Search"}),(0,t.jsx)("a",{href:"/browse",children:"Browse"})]})]})}},8120:e=>{e.exports={header:"header_header__zSvjR"}},8719:(e,r,a)=>{"use strict";a.d(r,{NA:()=>d,xM:()=>o,Fn:()=>h,UC:()=>n,Ho:()=>l,KN:()=>c});var t=a(5317);let i=(0,a(3915).Wp)({apiKey:"AIzaSyCUm4lKOrEMD2NCf_OTNluVxfl_X_4XPF8",authDomain:"media-query-gn.firebaseapp.com",projectId:"media-query-gn",storageBucket:"media-query-gn.firebasestorage.app",messagingSenderId:"329944024899",appId:"1:329944024899:web:b8a9dc072c216b858191f6",measurementId:"G-M964RJ1DLQ"}),s=(0,t.aU)(i),n=async e=>{try{let r=await (0,t.gS)((0,t.rJ)(s,"media"),{...e});return console.log("Media saved with ID:",r.id),r.id}catch(e){console.error("Error saving media to Firestore:",e)}},d=async e=>{let r=(0,t.rJ)(s,"media"),a=(0,t.P)(r,(0,t._M)("isbn","==",e));return!(await (0,t.GG)(a)).empty},o=async()=>{try{return(await (0,t.GG)((0,t.rJ)(s,"media"))).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Error fetching media:",e),[]}},l=async e=>{if(!e.trim())return[];let r=(0,t.rJ)(s,"media"),a=(0,t.P)(r),i=await (0,t.GG)(a),n=e.toLowerCase();return i.docs.map(e=>({id:e.id,...e.data()})).filter(e=>{var r,a;let t=null==(r=e.title)?void 0:r.toLowerCase().includes(n),i=null==(a=e.author)?void 0:a.toLowerCase().includes(n),s=!!Array.isArray(e.tags)&&e.tags.some(e=>e.toLowerCase().includes(n));return t||i||s})},c=async(e,r,a)=>{try{let i=(0,t.H9)(s,"media",e);await (0,t.mZ)(i,{loaned:{name:r,date:a.toISOString()}})}catch(e){console.error("Error updating loan info:",e)}},h=async e=>{try{let r=(0,t.H9)(s,"media",e);await (0,t.mZ)(r,{loaned:!1})}catch(e){console.error("Error updating loan info:",e)}}},8961:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>c});var t=a(5155),i=a(2115),s=a(1120),n=a(729),d=a(7457),o=a(8719),l=a(5902);function c(){let[e,r]=(0,i.useState)([]),[a,c]=(0,i.useState)(!0),[h,u]=(0,i.useState)([]);(0,i.useEffect)(()=>{(async()=>{try{let e=await (0,o.xM)();r(e)}catch(e){console.error("Error fetching media:",e)}finally{c(!1)}})()},[]);let m=(0,d.My)(e,h);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.A,{}),(0,t.jsxs)("main",{children:[(0,t.jsx)("h2",{children:"Browse Media Library"}),(0,t.jsx)("br",{}),(0,t.jsxs)(s.x,{data:m,style:{maxHeight:"100vh"},sortable:!0,sort:h,onSortChange:e=>{u(e.sort)},loading:a,children:[(0,t.jsx)(n.H,{field:"title",title:"Title"}),(0,t.jsx)(n.H,{field:"author",title:"Author(s)"}),(0,t.jsx)(n.H,{field:"isbn",title:"ISBN",sortable:!1}),(0,t.jsx)(n.H,{field:"published",title:"Published"})]})]})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[995,992,191,415,95,120,441,684,358],()=>r(4274)),_N_E=e.O()}]);